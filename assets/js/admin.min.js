jQuery(document).ready(function(e){if("undefined"==typeof wplmi_admin_L10n)return!1;var t=!0;if("disable"==wplmi_admin_L10n.highlighting&&(t=!1),t)var i=wp.codeEditor.initialize(e("#wplmi_display_info"),wplmi_admin_L10n.html_editor),a=wp.codeEditor.initialize(e("#wplmi_custom_css"),wplmi_admin_L10n.css_editor),o=wp.codeEditor.initialize(e("#wplmi_template_display_info"),wplmi_admin_L10n.html_editor);for(var n=e("#nav-container").find("a.nav-tab"),l=0;l<n.length;l++)e(n[l]).click(function(n){n.preventDefault(),e("a.active").removeClass("active"),e(this).addClass("active"),e("#wplmi-form-area #wplmi-"+e(this).attr("id")).show(),e("#wplmi-form-area .wplmi-metabox:not(#wplmi-"+e(this).attr("id")+")").hide(),e.cookie("wplmi_active_tab",e(this).attr("id"),{expires:30}),t&&("post"==e(this).attr("id")&&i.codemirror.refresh(),"misc"==e(this).attr("id")&&a.codemirror.refresh(),"template"==e(this).attr("id")&&o.codemirror.refresh())});if(void 0!==e.cookie("wplmi_active_tab")&&e("#nav-container").find("a#"+e.cookie("wplmi_active_tab")).trigger("click"),t){var r=[i,a,o];r.forEach(function(t,i,a){e(t.codemirror.getWrapperElement()).resizable({handles:"s",resize:function(){var i=e(this);t.codemirror.setSize(i.width(),i.height())}}),t.codemirror.on("change",function(e){e.save()})}),e("#wplmi-form .wplmi_row_custom_css").find(".CodeMirror").on("mousedown.codemirror",function(){var t=e(this);t.addClass("large"),a.codemirror.refresh(),t.off("mousedown.codemirror")}),e("#wplmi_enable_plugin").on("change",function(){var t=e(this).prop("checked");i.codemirror.setOption("readOnly",!t),e("#wplmi-form .wplmi_row_display_info").find(".CodeMirror").toggleClass("disabled",!t)}).change()}e("#wplmi_astra_support").on("change",function(){"none"==e(this).val()?t?(o.codemirror.setOption("readOnly",!1),e("#wplmi-form .wplmi_row_template_display_info").find(".CodeMirror").toggleClass("disabled",!1)):e("#wplmi_template_display_info").removeAttr("readonly"):e("#wplmi_theme_template_type").change()}).change(),e("#wplmi_theme_template_type").on("change",function(){var i;"default"==e(this).val()?i=!0:"custom"==e(this).val()&&(i=!1),t?(o.codemirror.setOption("readOnly",i),e("#wplmi-form .wplmi_row_template_display_info").find(".CodeMirror").toggleClass("disabled",i)):i?e("#wplmi_template_display_info").attr("readonly","readonly"):e("#wplmi_template_display_info").removeAttr("readonly")}).change(),e("#form-container").submit(function(t){t.preventDefault(),e(".save-settings").addClass("disabled").val(wplmi_admin_L10n.saving);var i=e.dialog({title:wplmi_admin_L10n.saving,content:wplmi_admin_L10n.saving_text,useBootstrap:!1,draggable:!1,theme:"material",type:"orange",closeIcon:!1,boxWidth:"25%",scrollToPreviousElement:!1});e(this).ajaxSubmit({success:function(){i.close(),e.alert({title:wplmi_admin_L10n.done,content:wplmi_admin_L10n.save_success,useBootstrap:!1,draggable:!1,theme:"material",type:"green",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wplmi_admin_L10n.ok_button,action:function(){}}}}),e(".save-settings").removeClass("disabled").val(wplmi_admin_L10n.save_button)},error:function(){i.close(),e.alert({title:wplmi_admin_L10n.error,content:wplmi_admin_L10n.process_failed,useBootstrap:!1,draggable:!1,theme:"material",type:"red",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wplmi_admin_L10n.ok_button,action:function(){}}}})}})}),e("input.wplmi-reset").on("click",function(t){t.preventDefault();var i=e(this),a=i.data("action"),o=i.data("notice"),n=i.data("success"),l=i.data("type"),r=i.data("process"),s=e.confirm({title:wplmi_admin_L10n.warning,content:o,useBootstrap:!1,theme:"material",animation:"scale",type:"red",boxWidth:"30%",draggable:!1,scrollToPreviousElement:!1,buttons:{confirm:{text:wplmi_admin_L10n.confirm_button,action:function(){s.close();var t=e.dialog({title:r,content:wplmi_admin_L10n.processing,useBootstrap:!1,draggable:!1,theme:"material",type:"orange",closeIcon:!1,boxWidth:"25%",scrollToPreviousElement:!1});e.post(wplmi_admin_L10n.ajaxurl,{action:a,action_type:l,security:wplmi_admin_L10n.security},function(i,a){!0===i.success?(t.close(),e.alert({title:wplmi_admin_L10n.done,content:n,useBootstrap:!1,draggable:!1,theme:"material",type:"green",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wplmi_admin_L10n.ok_button,action:function(){!0===i.data.reload&&(window.location.reload(),e.cookie("wplmi_active_tab","post",{expires:30}))}}}})):(t.close(),e.alert({title:wplmi_admin_L10n.error,content:i.data.error,useBootstrap:!1,draggable:!1,theme:"material",type:"red",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wplmi_admin_L10n.ok_button,action:function(){}}}}))})}},cancel:{text:wplmi_admin_L10n.cancel_button,action:function(){}}}})}),e("input.wplmi-copy").on("click",function(t){t.preventDefault();var i=e(this),a=i.val(),o=i.data("action");i.addClass("disabled").val(wplmi_admin_L10n.please_wait),e.post(wplmi_admin_L10n.ajaxurl,{action:o,security:wplmi_admin_L10n.security},function(t,o){if(!0===t.success){var n=e("<input>");e("body").append(n),n.val(t.data.elements).select(),document.execCommand("copy"),n.remove(),i.removeClass("disabled").val(a),e(".wplmi-copied").show().delay(1e3).fadeOut()}})}),e("input.wplmi-paste").on("click",function(t){t.preventDefault();e(this);var i=e.confirm({title:wplmi_admin_L10n.paste_data,content:'<textarea id="wplmi-settings-data-import" rows="4" style="width: 100%;"></textarea>',useBootstrap:!1,theme:"material",animation:"scale",type:"green",boxWidth:"40%",draggable:!1,scrollToPreviousElement:!1,buttons:{confirm:{text:wplmi_admin_L10n.import_btn,action:function(){var t=this.$content.find("#wplmi-settings-data-import").val();if(!t)return alert("Please enter valid settings data!"),!1;console.log(t),i.close(),e.dialog({title:wplmi_admin_L10n.importing,content:wplmi_admin_L10n.processing,useBootstrap:!1,draggable:!1,theme:"material",type:"orange",closeIcon:!1,boxWidth:"25%",scrollToPreviousElement:!1}),e.post(wplmi_admin_L10n.ajaxurl,{action:"wplmi_process_import_plugin_data",settings_data:t,security:wplmi_admin_L10n.security},function(t,i){!0===t.success&&(window.location.reload(),e.cookie("wplmi_active_tab","post",{expires:30}))})}},close:{text:wplmi_admin_L10n.close_btn,action:function(){}}}})}),e("#wplmi_date_type").change(function(){"default"==e(this).val()?e(".wplmi_row_date_format").show():"human_readable"==e(this).val()&&e(".wplmi_row_date_format").hide()}).change(),e("#wplmi_author_display").change(function(){"custom"==e(this).val()?e(".wplmi_row_author_list").show():e(".wplmi_row_author_list").hide()}).change(),e("#wplmi_template_date_type").change(function(){"default"==e(this).val()?e(".wplmi_row_template_date_format").show():"human_readable"==e(this).val()&&e(".wplmi_row_template_date_format").hide()}).change(),e("#wplmi_template_author_display").change(function(){"custom"==e(this).val()?e(".wplmi_row_template_author_list").show():e(".wplmi_row_template_author_list").hide()}).change(),e("#wplmi_astra_support, #wplmi_generatepress_support").change(function(){"replace"==e(this).val()?(e(".wplmi_row_theme_template_type").show(),e("a#post").hide(),e("#wplmi_enable_plugin").prop("checked",!1)):"none"==e(this).val()&&(e(".wplmi_row_theme_template_type").hide(),e("a#post").show())}).change(),e("#wplmi_post_types, #wplmi_schema_post_types, #wplmi_notification_post_types, #wplmi_archives").selectize({plugins:["remove_button"],delimiter:",",placeholder:e(this).data("placeholder"),persist:!1,create:!1}),e("#wplmi_recipients_list").selectize({plugins:["remove_button","restore_on_backspace"],persist:!1,create:!0,createOnBlur:!0,delimiter:",",placeholder:e(this).data("placeholder"),createFilter:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())}}),e("#wplmi_enable_schema").change(function(){"enable"==e(this).val()?(e(".wplmi_row_schema_post_types").show(),e(".wplmi_row_enhanced_schema, .schema-text").hide(),e("#wplmi_enhanced_schema").prop("checked",!1)):"inline"==e(this).val()?(e(".wplmi_row_enhanced_schema").show(),e(".wplmi_row_schema_post_types, .schema-text").hide()):"comp_mode"==e(this).val()?(e(".wplmi_row_schema_post_types, .wplmi_row_enhanced_schema").hide(),e(".schema-text").show()):"disable"==e(this).val()&&(e(".wplmi_row_schema_post_types, .wplmi_row_enhanced_schema, .schema-text").hide(),e("#wplmi_enhanced_schema").prop("checked",!1))}).change(),e("#wplmi_display_method").change(function(){"replace_original"==e(this).val()?(e(".wplmi_row_selectors, .wplmi_row_post_types").show(),e(".wplmi_row_archives").hide()):"manual"==e(this).val()?e(".wplmi_row_selectors, .wplmi_row_post_types, .wplmi_row_archives").hide():"before_content"!=e(this).val()&&"after_content"!=e(this).val()||(e(".wplmi_row_selectors").hide(),e(".wplmi_row_post_types, .wplmi_row_archives").show())}).change(),e("#wplmi_replace_date").change(function(){"remove"==e(this).val()?e(".remove-info-text").show():e(".remove-info-text").hide()}).change(),e(".coffee-amt").change(function(){var t=e(".buy-coffee-btn");t.attr("href",t.data("link")+e(this).val())}),e(window).keydown(function(t){if(t.ctrlKey||t.metaKey)switch(String.fromCharCode(t.which).toLowerCase()){case"s":t.preventDefault(),e("#form-container").submit()}})});