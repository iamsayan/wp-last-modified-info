jQuery(document).ready(function(e){if("undefined"==typeof wplmi_admin_L10n)return!1;for(var t=wp.codeEditor.initialize(e("#wplmi_display_info"),wplmi_admin_L10n.html_editor),i=wp.codeEditor.initialize(e("#wplmi_custom_css"),wplmi_admin_L10n.css_editor),a=wp.codeEditor.initialize(e("#wplmi_template_display_info"),wplmi_admin_L10n.html_editor),o=e("#nav-container").find("a.nav-tab"),n=0;n<o.length;n++)e(o[n]).click(function(o){o.preventDefault(),e("a.active").removeClass("active"),e(this).addClass("active"),e("#wplmi-form-area #wplmi-"+e(this).attr("id")).show(),e("#wplmi-form-area .wplmi-metabox:not(#wplmi-"+e(this).attr("id")+")").hide(),e.cookie("wplmi_active_tab",e(this).attr("id"),{expires:30}),"post"==e(this).attr("id")&&t.codemirror.refresh(),"misc"==e(this).attr("id")&&i.codemirror.refresh(),"template"==e(this).attr("id")&&a.codemirror.refresh()});void 0!==e.cookie("wplmi_active_tab")&&e("#nav-container").find("a#"+e.cookie("wplmi_active_tab")).trigger("click");var r=[t,i,a];r.forEach(function(t,i,a){e(t.codemirror.getWrapperElement()).resizable({handles:"s",resize:function(){var i=e(this);t.codemirror.setSize(i.width(),i.height())}}),t.codemirror.on("change",function(e){e.save()})}),e("#form-container").submit(function(t){t.preventDefault(),e(".save-settings").addClass("disabled").val(wplmi_admin_L10n.saving);var i=e.dialog({title:wplmi_admin_L10n.saving,content:wplmi_admin_L10n.saving_text,useBootstrap:!1,draggable:!1,theme:"material",type:"orange",closeIcon:!1,boxWidth:"25%",scrollToPreviousElement:!1});e(this).ajaxSubmit({success:function(){i.close(),e.alert({title:wplmi_admin_L10n.done,content:wplmi_admin_L10n.save_success,useBootstrap:!1,draggable:!1,theme:"material",type:"green",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wplmi_admin_L10n.ok_button,action:function(){}}}}),e(".save-settings").removeClass("disabled").val(wplmi_admin_L10n.save_button)},error:function(){i.close(),e.alert({title:wplmi_admin_L10n.error,content:wplmi_admin_L10n.process_failed,useBootstrap:!1,draggable:!1,theme:"material",type:"red",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wplmi_admin_L10n.ok_button,action:function(){}}}})}})}),e("input.wplmi-reset").on("click",function(t){t.preventDefault();var i=e(this),a=i.data("action"),o=i.data("notice"),n=i.data("success"),r=i.data("type"),l=e.confirm({title:wplmi_admin_L10n.warning,content:o,useBootstrap:!1,theme:"material",animation:"scale",type:"red",boxWidth:"30%",draggable:!1,scrollToPreviousElement:!1,buttons:{confirm:{text:wplmi_admin_L10n.confirm_button,action:function(){l.close();var t=e.dialog({title:wplmi_admin_L10n.deleting,content:wplmi_admin_L10n.process_delete,useBootstrap:!1,draggable:!1,theme:"material",type:"orange",closeIcon:!1,boxWidth:"25%",scrollToPreviousElement:!1});e.post(wplmi_admin_L10n.ajaxurl,{action:a,action_type:r,security:wplmi_admin_L10n.security},function(i,a){!0===i.success?(t.close(),e.alert({title:wplmi_admin_L10n.done,content:n,useBootstrap:!1,draggable:!1,theme:"material",type:"green",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wplmi_admin_L10n.ok_button,action:function(){!0===i.data.reload&&(window.location.reload(),e.cookie("wplmi_active_tab","post",{expires:30}))}}}})):(t.close(),e.alert({title:wplmi_admin_L10n.error,content:i.data.error,useBootstrap:!1,draggable:!1,theme:"material",type:"red",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wplmi_admin_L10n.ok_button,action:function(){}}}}))})}},cancel:{text:wplmi_admin_L10n.cancel_button,action:function(){}}}})}),e("#wplmi-form .wplmi_row_custom_css").find(".CodeMirror").on("mousedown.codemirror",function(){var t=e(this);t.addClass("large"),i.codemirror.refresh(),t.off("mousedown.codemirror")}),e("#wplmi_enable_plugin").on("change",function(){var i=e(this).prop("checked");t.codemirror.setOption("readOnly",!i),e("#wplmi-form .wplmi_row_display_info").find(".CodeMirror").toggleClass("disabled",!i)}).change(),e("#wplmi_date_type").change(function(){"default"==e(this).val()?e(".wplmi_row_date_format").show():"human_readable"==e(this).val()&&e(".wplmi_row_date_format").hide()}).change(),e("#wplmi_author_display").change(function(){"custom"==e(this).val()?e(".wplmi_row_author_list").show():e(".wplmi_row_author_list").hide()}).change(),e("#wplmi_template_date_type").change(function(){"default"==e(this).val()?e(".wplmi_row_template_date_format").show():"human_readable"==e(this).val()&&e(".wplmi_row_template_date_format").hide()}).change(),e("#wplmi_template_author_display").change(function(){"custom"==e(this).val()?e(".wplmi_row_template_author_list").show():e(".wplmi_row_template_author_list").hide()}).change(),e("#wplmi_astra_support, #wplmi_generatepress_support").change(function(){"replace"==e(this).val()?(e(".wplmi_row_theme_template_type").show(),e("a#post").hide(),e("#wplmi_enable_plugin").prop("checked",!1)):"none"==e(this).val()&&(e(".wplmi_row_theme_template_type").hide(),e("a#post").show())}).change(),e("#wplmi_theme_template_type").on("change",function(){var t;"default"==e(this).val()?t=!0:"custom"==e(this).val()&&(t=!1),a.codemirror.setOption("readOnly",t),e("#wplmi-form .wplmi_row_template_display_info").find(".CodeMirror").toggleClass("disabled",t)}).change(),e("#wplmi_post_types, #wplmi_schema_post_types, #wplmi_notification_post_types, #wplmi_archives").selectize({plugins:["remove_button"],delimiter:",",placeholder:e(this).data("placeholder"),persist:!1,create:!1}),e("#wplmi_recipients_list").selectize({plugins:["remove_button","restore_on_backspace"],persist:!1,create:!0,createOnBlur:!0,delimiter:",",placeholder:e(this).data("placeholder"),createFilter:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())}}),e("#wplmi_enable_schema").change(function(){"enable"==e(this).val()?(e(".wplmi_row_schema_post_types").show(),e(".wplmi_row_enhanced_schema, .schema-text").hide(),e("#wplmi_enhanced_schema").prop("checked",!1)):"inline"==e(this).val()?(e(".wplmi_row_enhanced_schema").show(),e(".wplmi_row_schema_post_types, .schema-text").hide()):"comp_mode"==e(this).val()?(e(".wplmi_row_schema_post_types, .wplmi_row_enhanced_schema").hide(),e(".schema-text").show()):"disable"==e(this).val()&&(e(".wplmi_row_schema_post_types, .wplmi_row_enhanced_schema, .schema-text").hide(),e("#wplmi_enhanced_schema").prop("checked",!1))}).change(),e("#wplmi_display_method").change(function(){"replace_original"==e(this).val()?(e(".wplmi_row_selectors, .wplmi_row_post_types").show(),e(".wplmi_row_archives").hide()):"manual"==e(this).val()?e(".wplmi_row_selectors, .wplmi_row_post_types, .wplmi_row_archives").hide():"before_content"!=e(this).val()&&"after_content"!=e(this).val()||(e(".wplmi_row_selectors").hide(),e(".wplmi_row_post_types, .wplmi_row_archives").show())}).change(),e(".coffee-amt").change(function(){var t=e(".buy-coffee-btn");t.attr("href",t.data("link")+e(this).val())}),e(window).keydown(function(t){if(t.ctrlKey||t.metaKey)switch(String.fromCharCode(t.which).toLowerCase()){case"s":t.preventDefault(),e("#form-container").submit()}})});