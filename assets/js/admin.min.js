jQuery(document).ready(function(e){if("undefined"==typeof wplmi_admin_L10n)return!1;var t,i,o,a=!0;"disable"==wplmi_admin_L10n.highlighting&&(a=!1),a&&(t=wp.codeEditor.initialize(e("#wplmi_display_info"),wplmi_admin_L10n.html_editor),i=wp.codeEditor.initialize(e("#wplmi_custom_css"),wplmi_admin_L10n.css_editor),o=wp.codeEditor.initialize(e("#wplmi_template_display_info"),wplmi_admin_L10n.html_editor));var n=e("#wplmi-nav-container").find("a.wplmi-tab:not(.type-link)");for(let l of n)e(l).on("click",function(n){n.preventDefault();var l=e(this).attr("id").replace("wplmi-tab-","");e("a.is-active").removeClass("is-active"),e(this).addClass("is-active"),e(".wplmi-metabox .wplmi-"+l).removeClass("d-none"),e(".wplmi-metabox .postbox:not(.wplmi-"+l+"), .wplmi-metabox .sub-links:not(.wplmi-"+l+")").addClass("d-none"),e.cookie("wplmi_active_tab",l,{expires:30}),a&&("post"==l&&t.codemirror.refresh(),"misc"==l&&i.codemirror.refresh(),"template"==l&&o.codemirror.refresh())});setTimeout(function(){void 0!==e.cookie("wplmi_active_tab")?e("#wplmi-nav-container").find("a#wplmi-tab-"+e.cookie("wplmi_active_tab")).trigger("click"):e("#wplmi-nav-container").find("a#wplmi-tab-general").trigger("click")},50);let l=(e,t,i)=>{switch(i){case"=":return e==t;case">":return e>t;case"<":return e<t;case"!=":return e!=t;case">=":return e>=t;case"<=":return e<=t}};if(e(".wplmi-wrap").find(".wplmi-form-el[data-condition]").each(function(t,i){let o=e(i).data("condition");e(`#wplmi_${o[0].replace("wplmi_","")}`).on("change",function(){l(e(this).val(),o[2],o[1])?e(i).closest("tr").removeClass("wplmi-c-hide").addClass("wplmi-c-show").slideDown():e(i).closest("tr").removeClass("wplmi-c-show").addClass("wplmi-c-hide").hide()}).trigger("change")}),setTimeout(()=>{e(".wplmi-wrap").find(".wplmi-form-el[data-show-if]").each(function(t,i){let o=e(i).data("show-if");e(`#wplmi_${o.replace("wplmi_","")}`).on("change",function(){e(this).is(":checked")?e(i).closest("tr:not(.wplmi-c-hide)").slideDown():e(i).closest("tr:not(.wplmi-c-hide)").hide()}).trigger("change")}),e("#wpbody-content").show()},100),a){var r=[t,i,o];r.forEach(function(t){e(t.codemirror.getWrapperElement()).resizable({handles:"s",resize:function(){var i=e(this);t.codemirror.setSize(i.width(),i.height())}}),t.codemirror.on("change",function(e){e.save()})}),e("#wplmi-settings-form .wplmi_el_custom_css").find(".CodeMirror").on("mousedown.codemirror",function(){var t=e(this);t.addClass("large"),i.codemirror.refresh(),t.off("mousedown.codemirror")}),e("#wplmi_enable_plugin").on("change",function(){var i=e(this).prop("checked");t.codemirror.setOption("readOnly",!i),e("#wplmi-settings-form .wplmi_el_display_info").find(".CodeMirror").toggleClass("disabled",!i)}).trigger("change")}e("#wplmi-settings-form").submit(function(t){t.preventDefault(),e(".wplmi-save").addClass("disabled").val(wplmi_admin_L10n.saving);var i=e.dialog({title:wplmi_admin_L10n.saving,content:wplmi_admin_L10n.saving_text,useBootstrap:!1,draggable:!1,theme:"material",type:"orange",closeIcon:!1,boxWidth:"25%",scrollToPreviousElement:!1});e(this).ajaxSubmit({success:function(){i.close(),e.alert({title:wplmi_admin_L10n.done,content:wplmi_admin_L10n.save_success,useBootstrap:!1,draggable:!1,theme:"material",type:"green",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wplmi_admin_L10n.ok_button}}}),e(".wplmi-save").removeClass("disabled").val(wplmi_admin_L10n.save_button)},error:function(){i.close(),e.alert({title:wplmi_admin_L10n.error,content:wplmi_admin_L10n.process_failed,useBootstrap:!1,draggable:!1,theme:"material",type:"red",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wplmi_admin_L10n.ok_button}}})}})}),e("input.wplmi-reset").on("click",function(t){t.preventDefault();var i=e(this),o=i.data("action"),a=i.data("notice"),n=i.data("success"),l=i.data("type"),r=i.data("process"),s=e.confirm({title:wplmi_admin_L10n.warning,content:a,useBootstrap:!1,theme:"material",animation:"scale",type:"red",boxWidth:"30%",draggable:!1,scrollToPreviousElement:!1,buttons:{confirm:{text:wplmi_admin_L10n.confirm_button,action:function(){s.close();var t=e.dialog({title:r,content:wplmi_admin_L10n.processing,useBootstrap:!1,draggable:!1,theme:"material",type:"orange",closeIcon:!1,boxWidth:"25%",scrollToPreviousElement:!1});e.post(wplmi_admin_L10n.ajaxurl,{action:o,action_type:l,security:wplmi_admin_L10n.security},function(i){!0===i.success?(t.close(),e.alert({title:wplmi_admin_L10n.done,content:n,useBootstrap:!1,draggable:!1,theme:"material",type:"green",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wplmi_admin_L10n.ok_button,action:function(){!0===i.data.reload&&(window.location.reload(),e.cookie("wplmi_active_tab","post",{expires:30}))}}}})):(t.close(),e.alert({title:wplmi_admin_L10n.error,content:i.data.error,useBootstrap:!1,draggable:!1,theme:"material",type:"red",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wplmi_admin_L10n.ok_button}}}))})}},cancel:{text:wplmi_admin_L10n.cancel_button}}})}),e("input.wplmi-copy").on("click",function(t){t.preventDefault();var i=e(this),o=i.val(),a=i.data("action");i.addClass("disabled").val(wplmi_admin_L10n.please_wait),e.post(wplmi_admin_L10n.ajaxurl,{action:a,security:wplmi_admin_L10n.security},function(t){!0===t.success&&(navigator.clipboard&&navigator.clipboard.writeText(t.data.elements).then(function(){console.log("Copied to clipboard!")},function(e){console.error("Could not copy text: ",e)}),i.removeClass("disabled").val(o),e(".wplmi-copied").show().delay(1e3).fadeOut())})}),e("input.wplmi-paste").on("click",function(t){t.preventDefault();var i=e.confirm({title:wplmi_admin_L10n.paste_data,content:'<textarea id="wplmi-settings-data-import" rows="4" style="width: 100%;"></textarea>',useBootstrap:!1,theme:"material",animation:"scale",type:"green",boxWidth:"40%",draggable:!1,scrollToPreviousElement:!1,buttons:{confirm:{text:wplmi_admin_L10n.import_btn,action:function(){var t=this.$content.find("#wplmi-settings-data-import").val();if(!t)return alert("Please enter valid settings data!"),!1;i.close(),e.dialog({title:wplmi_admin_L10n.importing,content:wplmi_admin_L10n.processing,useBootstrap:!1,draggable:!1,theme:"material",type:"orange",closeIcon:!1,boxWidth:"25%",scrollToPreviousElement:!1}),e.post(wplmi_admin_L10n.ajaxurl,{action:"wplmi_process_import_plugin_data",settings_data:t,security:wplmi_admin_L10n.security},function(t){!0===t.success&&(window.location.reload(),e.cookie("wplmi_active_tab","post",{expires:30}))})}},close:{text:wplmi_admin_L10n.close_btn}}})}),e("#wplmi_post_types, #wplmi_schema_post_types, #wplmi_notification_post_types, #wplmi_archives").selectize({plugins:["remove_button"],delimiter:",",placeholder:e(this).data("placeholder"),persist:!1,create:!1}),e("#wplmi_recipients_list").selectize({plugins:["remove_button","restore_on_backspace"],persist:!1,create:!0,createOnBlur:!0,delimiter:",",placeholder:e(this).data("placeholder"),createFilter:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())}}),e("#wplmi_display_method").change(function(){"replace_original"==e(this).val()?(e(".wplmi_el_selectors, .wplmi_el_post_types").show(),e(".wplmi_el_archives").hide()):"manual"==e(this).val()?e(".wplmi_el_selectors, .wplmi_el_post_types, .wplmi_el_archives").hide():"before_content"!=e(this).val()&&"after_content"!=e(this).val()||(e(".wplmi_el_selectors").hide(),e(".wplmi_el_post_types, .wplmi_el_archives").show())}).trigger("change"),e(".coffee-amt").change(function(){var t=e(".buy-coffee-btn");t.attr("href",t.data("link")+e(this).val())}),e(window).keydown(function(t){if(t.ctrlKey||t.metaKey)switch(String.fromCharCode(t.which).toLowerCase()){case"s":t.preventDefault(),e("#wplmi-settings-form").submit()}})});