function wplmiOpenPopup(t,e,i,o){var n=window.outerHeight/2+window.screenY-o/2,a=window.outerWidth/2+window.screenX-i/2;return window.open(t,e,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+i+", height="+o+", top="+n+", left="+a)}jQuery(document).ready(function(t){if("undefined"==typeof wplmiAdminL10n)return!1;var e,i,o,n=!0;"disable"==wplmiAdminL10n.highlighting&&(n=!1),n&&(e=wp.codeEditor.initialize(t("#wplmi_display_info"),wplmiAdminL10n.html_editor),i=wp.codeEditor.initialize(t("#wplmi_custom_css"),wplmiAdminL10n.css_editor),o=wp.codeEditor.initialize(t("#wplmi_template_display_info"),wplmiAdminL10n.html_editor));var a=t("#wplmi-nav-container").find("a.wplmi-tab:not(.type-link)");for(var l of a)t(l).on("click",function(a){a.preventDefault();var l=t(this).attr("id").replace("wplmi-tab-","");t("a.is-active").removeClass("is-active"),t(this).addClass("is-active"),t(".wplmi-metabox .wplmi-"+l).removeClass("d-none"),t(".wplmi-metabox .postbox:not(.wplmi-"+l+"), .wplmi-metabox .sub-links:not(.wplmi-"+l+")").addClass("d-none"),localStorage.setItem("wplmi_active_tab",l),n&&("post"==l&&e.codemirror.refresh(),"misc"==l&&i.codemirror.refresh(),"template"==l&&o.codemirror.refresh())});let r=(t,e,i)=>{switch(i){case"=":return t==e;case">":return t>e;case"<":return t<e;case"!=":return t!=e;case">=":return t>=e;case"<=":return t<=e}};if(t(".wplmi-wrap").find(".wplmi-form-el[data-condition]").each(function(e,i){let o=t(i).data("condition");t(`#wplmi_${o[0].replace("wplmi_","")}`).on("change",function(){let e=t(this).val(),n=o[2],a=!1;Array.isArray(n)?n.forEach(function(t){r(e,t,o[1])&&(a=!0)}):a=r(t(this).val(),n,o[1]),a?t(i).closest("tr").removeClass("wplmi-c-hide").addClass("wplmi-c-show").slideDown():t(i).closest("tr").removeClass("wplmi-c-show").addClass("wplmi-c-hide").hide()}).trigger("change")}),setTimeout(()=>{t(".wplmi-wrap").find(".wplmi-form-el[data-show-if]").each(function(e,i){let o=t(i).data("show-if");t(`#wplmi_${o.replace("wplmi_","")}`).on("change",function(){t(this).is(":checked")?t(i).closest("tr:not(.wplmi-c-hide)").slideDown():t(i).closest("tr:not(.wplmi-c-hide)").hide()}).trigger("change")}),localStorage.wplmi_active_tab?t("#wplmi-nav-container").find("a#wplmi-tab-"+localStorage.wplmi_active_tab).trigger("click"):t("#wplmi-nav-container").find("a#wplmi-tab-general").trigger("click")},50),n){var s=[e,i,o];s.forEach(function(e){t(e.codemirror.getWrapperElement()).resizable({handles:"s",resize:function(){var i=t(this);e.codemirror.setSize(i.width(),i.height())}}),e.codemirror.on("change",function(t){t.save()})}),t("#wplmi-settings-form .wplmi_el_custom_css").find(".CodeMirror").on("mousedown.codemirror",function(){var e=t(this);e.addClass("large"),i.codemirror.refresh(),e.off("mousedown.codemirror")}),t("#wplmi_enable_plugin").on("change",function(){var i=t(this).prop("checked");e.codemirror.setOption("readOnly",!i),t("#wplmi-settings-form .wplmi_el_display_info").find(".CodeMirror").toggleClass("disabled",!i)}).trigger("change")}t("#wplmi-settings-form").submit(function(e){e.preventDefault(),t(".wplmi-save").addClass("disabled").val(wplmiAdminL10n.saving);var i=t.dialog({title:wplmiAdminL10n.saving,content:wplmiAdminL10n.saving_text,useBootstrap:!1,draggable:!1,theme:"material",type:"orange",closeIcon:!1,boxWidth:"25%",scrollToPreviousElement:!1});t(this).ajaxSubmit({success:function(){i.close(),t.alert({title:wplmiAdminL10n.done,content:wplmiAdminL10n.save_success,useBootstrap:!1,draggable:!1,theme:"material",type:"green",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wplmiAdminL10n.ok_button}}}),t(".wplmi-save").removeClass("disabled").val(wplmiAdminL10n.save_button)},error:function(){i.close(),t.alert({title:wplmiAdminL10n.error,content:wplmiAdminL10n.process_failed,useBootstrap:!1,draggable:!1,theme:"material",type:"red",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wplmiAdminL10n.ok_button}}})}})}),t("input.wplmi-reset").on("click",function(e){e.preventDefault();var i=t(this),o=i.data("action"),n=i.data("notice"),a=i.data("success"),l=i.data("type"),r=i.data("process"),s=t.confirm({title:wplmiAdminL10n.warning,content:n,useBootstrap:!1,theme:"material",animation:"scale",type:"red",boxWidth:"30%",draggable:!1,scrollToPreviousElement:!1,buttons:{confirm:{text:wplmiAdminL10n.confirm_button,action:function(){s.close();var e=t.dialog({title:r,content:wplmiAdminL10n.processing,useBootstrap:!1,draggable:!1,theme:"material",type:"orange",closeIcon:!1,boxWidth:"25%",scrollToPreviousElement:!1});t.post(wplmiAdminL10n.ajaxurl,{action:o,action_type:l,security:wplmiAdminL10n.security},function(i){!0===i.success?(e.close(),t.alert({title:wplmiAdminL10n.done,content:a,useBootstrap:!1,draggable:!1,theme:"material",type:"green",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wplmiAdminL10n.ok_button,action:function(){!0===i.data.reload&&(localStorage.setItem("wplmi_active_tab","post"),location.reload())}}}})):(e.close(),t.alert({title:wplmiAdminL10n.error,content:i.data.error,useBootstrap:!1,draggable:!1,theme:"material",type:"red",boxWidth:"25%",scrollToPreviousElement:!1,buttons:{buttonOK:{text:wplmiAdminL10n.ok_button}}}))})}},cancel:{text:wplmiAdminL10n.cancel_button}}})}),t("input.wplmi-copy").on("click",function(e){e.preventDefault();var i=t(this),o=i.val(),n=i.data("action");i.addClass("disabled").val(wplmiAdminL10n.please_wait),t.post(wplmiAdminL10n.ajaxurl,{action:n,security:wplmiAdminL10n.security},function(e){!0===e.success&&(navigator.clipboard&&navigator.clipboard.writeText(e.data.elements).then(function(){console.log("Copied to clipboard!")},function(t){console.error("Could not copy text: ",t)}),i.removeClass("disabled").val(o),t(".wplmi-copied").show().delay(1e3).fadeOut())})}),t("input.wplmi-paste").on("click",function(e){e.preventDefault();var i=t.confirm({title:wplmiAdminL10n.paste_data,content:'<textarea id="wplmi-settings-data-import" rows="4" style="width: 100%;"></textarea>',useBootstrap:!1,theme:"material",animation:"scale",type:"green",boxWidth:"40%",draggable:!1,scrollToPreviousElement:!1,buttons:{confirm:{text:wplmiAdminL10n.import_btn,action:function(){var e=this.$content.find("#wplmi-settings-data-import").val();if(!e)return alert("Please enter valid settings data!"),!1;i.close(),t.dialog({title:wplmiAdminL10n.importing,content:wplmiAdminL10n.processing,useBootstrap:!1,draggable:!1,theme:"material",type:"orange",closeIcon:!1,boxWidth:"25%",scrollToPreviousElement:!1}),t.post(wplmiAdminL10n.ajaxurl,{action:"wplmi_process_import_plugin_data",settings_data:e,security:wplmiAdminL10n.security},function(t){!0===t.success&&(localStorage.setItem("wplmi_active_tab","post"),location.reload())})}},close:{text:wplmiAdminL10n.close_btn}}})}),t("#wplmi_post_types, #wplmi_schema_post_types, #wplmi_notification_post_types, #wplmi_archives").selectize({plugins:["remove_button"],delimiter:",",placeholder:t(this).data("placeholder"),persist:!1,create:!1}),t("#wplmi_recipients_list").selectize({plugins:["remove_button","restore_on_backspace"],persist:!1,create:!0,createOnBlur:!0,delimiter:",",placeholder:t(this).data("placeholder"),createFilter:function(t){var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(String(t).toLowerCase())}}),t(".coffee-amt").on("change",function(){var e=t(".buy-coffee-btn");e.attr("href",e.data("link")+t(this).val())}),t("a.share-btn:not(.no-popup)").on("click",function(e){e.preventDefault(),wplmiOpenPopup(t(this).attr("href"),"Share Window",950,700)}),t(window).keydown(function(e){if(e.ctrlKey||e.metaKey)switch(String.fromCharCode(e.which).toLowerCase()){case"s":e.preventDefault(),t("#wplmi-settings-form").submit()}}),t(".click-to-copy").on("click",function(e){e.preventDefault(),navigator.clipboard&&navigator.clipboard.writeText(t(this).text()).then(function(){alert(wplmiAdminL10n.copied)},function(t){console.error("Could not copy text: ",t)})})});